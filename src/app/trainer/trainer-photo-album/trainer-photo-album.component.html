<div class="bg-gray-100 font-sans w-full">
    <div class="flex items-center justify-center">
        <div class="bg-white p-6 mt-20 mb-10 lg-rounded">
            <form [formGroup]="updateTrainerPhotoAlbumForm">
                <header class="justify-start p-2 text-gray-950 font-bold font-sans">
                    <h1 class="text-xl text-red-600">Photo Album
                        <span *ngIf="!trainerPhotoAlbum.id" class="text-sm mx-2 text-gray-700 italic">
                            (action required)</span>
                    </h1>
                    <span class="text-md flex text-gray-700">
                        Date registered: {{ trainerPhotoAlbum.date ? formatDate(trainerPhotoAlbum.date) : 'N/A' }}
                    </span>
                </header>
                <div class="border-b-2"></div>
                <div class="mt-4 mb-2 block text-sm font-semibold text-gray-950 mb-1">
                    Select up to 15 Photos.
                </div>
                <div class="invalid-form">
                    <span *ngIf="updateTrainerPhotoAlbumForm.invalid && invalidForm" class="mx-2 text-red-600">
                        Please complete all sections
                    </span>
                    <span *ngIf="updateTrainerPhotoAlbumForm.valid && invalidForm" class="mx-2 text-gray-600">
                        Eerything's up to date
                    </span>
                </div>
                <div class="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    <ng-container *ngFor="let i of indexArray">
                        <label
                            class="relative block w-full aspect-square border-2 border-dashed rounded-md cursor-pointer hover:border-red-600 transition-all overflow-hidden">
                            <input type="file" accept="image/*" multiple (change)="onImageSelected($event, i)"
                                class="hidden" />
                            <div class="flex items-center justify-center w-full h-full text-sm text-gray-500">
                                <ng-container *ngIf="imagePreviews[i]; else placeholder">
                                    <img [src]="imagePreviews[i]" class="object-cover w-full h-full rounded-md" />
                                    <!-- X button -->
                                    <button type="button"
                                        (click)="removeImage(i); $event.stopPropagation(); $event.preventDefault()"
                                        class="absolute top-1 right-1 bg-white text-red-600 rounded-full w-5 h-5 flex items-center justify-center shadow hover:bg-red-100">
                                        <span class="-mt-1">&times;</span>
                                    </button>
                                </ng-container>
                                <ng-template #placeholder>
                                    <span class="text-xs text-gray-400">Click to add</span>
                                </ng-template>
                            </div>
                        </label>
                    </ng-container>
                </div>
                <div class="text-sm text-gray-600 mt-2">
                    Selected photos: {{imgCount}}
                </div>
                <div *ngIf="imgCount < 9" class="text-xs text-red-600 italic">
                    You must select at least 9 photos
                </div>

                <div class="mt-4">
                    <label for="comment" class="block text-sm font-semibold text-gray-950 mb-1">Photo
                        Inspiration</label>
                    <textarea id="comment" formControlName="comment" rows="4"
                        placeholder="Describe the inspiration behind these photos..."
                        class="w-full px-4 py-2 text-gray-900 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-800 focus:border-transparent resize-none"></textarea>
                    <div *ngIf="updateTrainerPhotoAlbumForm.get('comment')?.invalid && invalidForm"
                        class="text-sm text-red-600 mt-1">
                        Comment is required
                    </div>
                </div>

                <div class="flex-cols items-center justify-center gap-2 w-full p-2 text-gray-950">
                    <button [disabled]="isSaveDisabled"
                        class="bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-md mx-auto m-2 col-span-2 py-1 px-2 font-bold font-sans mx-4 text-white text-sm lg:text-md flex items-center justify-center"
                        type="submit" (click)="updateTrainerPhotoAlbum()">
                        Save
                    </button>

                </div>
            </form>
        </div>
    </div>
</div>