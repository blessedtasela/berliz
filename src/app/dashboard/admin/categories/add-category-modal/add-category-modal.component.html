<div class="rounded-md mx-auto">
    <form [formGroup]="addCategoryForm">
        <header class="text-center m-2">
            <div class="text-red-600 text-right font-bold -mb-4">
                <i-feather name="x-circle" (click)="closeDialog()" class="cursor-pointer ml-20"></i-feather>
            </div>
            <h1 class="font-bold font-sans text-xl">Add a new category</h1>
            <p class="font-sans text-sm">Please provide details of the category and selet it's tags.
            </p>
        </header>
        <hr [ngClass]="{'border-red-500': 
             (addCategoryForm.get('name')?.invalid ||
                addCategoryForm.get('description')?.invalid ||
                addCategoryForm.get('photo')?.invalid ||
                addCategoryForm.get('tagIds')?.invalid)
                 && invalidForm }">
        <div class="invalid-form">
            <span *ngIf="!(addCategoryForm.get('name')?.invalid ||
                    addCategoryForm.get('description')?.invalid ||
                    addCategoryForm.get('photo')?.invalid ||
                    addCategoryForm.get('tagIds')?.invalid)
                     && invalidForm" class="mx-2 text-gray-400">
                Everything looks good
            </span>
        </div>
        <div class="grid grid-cols-4 gap-1 flex items-center">
            <div class="mx-auto col-span-2">
                <input formControlName="name"
                    class="w-36 md:w-full border-2 px-4 py-2 rounded-md m-2 hover:border-gray-400 focus:border-gray-400 focus:outline-none"
                    [ngClass]="{'border-red-400': addCategoryForm.get('name')?.invalid && addCategoryForm.get('name')?.touched }"
                    placeholder="Category name" type="text">
                <div *ngIf="addCategoryForm.get('name')?.invalid && addCategoryForm.get('name')?.dirty"
                    class="text-red-500 mx-2">
                    Tag Name is required
                </div>
            </div>
            <div class="mx-auto col-span-2">
                <select formControlName="photo" class="w-full"
                    class="w-36 md:w-full border-2 px-4 py-2 rounded-md m-2 col-span-2  hover:border-gray-400 focus:border-gray-400 focus:outline-none"
                    [ngClass]="{'border-red-400': addCategoryForm.get('photo')?.invalid && addCategoryForm.get('photo')?.touched }"
                    placeholder="photo" type="text">
                    <option selected hidden class="font-sans">Select Icon name</option>
                    <option *ngFor="let photo of icons">{{ photo.name }}</option>
                </select>
                <div *ngIf="addCategoryForm.get('photo')?.invalid && addCategoryForm.get('photo')?.touched"
                    class="text-red-500 mx-2">
                    select an icon name
                </div>
            </div>
            <div class="mx-auto col-span-4">
                <textarea formControlName="description"
                    class="border-2 px-4 py-2 rounded-md m-2 hover:border-gray-400 focus:border-gray-400 focus:outline-none"
                    [ngClass]="{'border-red-400': addCategoryForm.get('description')?.invalid && addCategoryForm.get('description')?.touched }"
                    placeholder="Description" rows="5" cols="30"></textarea>
                <div *ngIf="addCategoryForm.get('description')?.invalid && addCategoryForm.get('description')?.dirty"
                    class="text-red-500 mx-2">
                    Description is required
                </div>
            </div>
            <div *ngFor="let tag of tags; let i = index" class="mx-auto flex items-center">
                <input formArrayName="tagIds" (change)="onCheckboxChanged($event)"
                    class="w-full border-2 px-4 py-2 rounded-md m-2 hover:border-gray-400 focus:border-gray-400 focus:outline-none"
                    placeholder="tags" type="checkbox" [value]="tag.id">
                {{ tag.name }}
            </div>
            <div *ngIf="addCategoryForm.get('tagIds')?.invalid && invalidForm" class="text-red-500 mx-2">
                Select at least one tag
            </div>
            <div class="bg-gray-950 rounded-md mx-auto m-2 col-span-2">
                <button type="button"
                    class="p-2 font-bold font-sans mx-4 text-white text-sm lg:text-md flex items-center justify-center"
                    (click)="clear()">
                    Clear
                </button>
            </div>
            <div class="bg-red-600 rounded-md mx-auto m-2 col-span-2">
                <button type="submit"
                    class="p-2 font-bold font-sans mx-4 text-white text-sm lg:text-md flex items-center justify-center"
                    (click)="addCategory()">
                    Add
                </button>
            </div>
        </div>
    </form>
</div>